loki:
  storage:
    type: s3
    s3:
      endpoint: "http://minio.STORAGE.svc.cluster.local:9000"
      bucketnames: "{{ LOKI_BUCKETNAME }}"
      access_key_id: "{{ MINIO_ACCESS_KEY }}"
      secret_access_key: "{{ MINIO_SECRET_KEY }}"
      insecure: true

  schemaConfig:
    configs:
      - from: "2024-01-01"
        store: boltdb-shipper
        object_store: s3
        schema: v12
        index:
          prefix: index_
          period: 24h

  compactor:
    retention_enabled: true

  limits_config:
    retention_period: 720h  # 30 days